{{#each fields as |field|}}
  <p>
    <div>{{field.title}}</div>

    {{#equal field.type 'text'}}
      <input
        type="text"
        name="{{pathToParam (concat ../fieldPrefix field.path)}}"
        value="{{get ../editorSource (concat ../fieldPrefix field.path)}}"
      >
    {{/equal}}

    {{#equal field.type 'textarea'}}
      <textarea
        name="{{pathToParam (concat ../fieldPrefix field.path)}}"
        cols="50"
        rows="15"
>{{get ../editorSource (concat ../fieldPrefix field.path)}}</textarea>
    {{/equal}}

    {{#equal field.type 'list'}}
      <div class="js-field-list" data-opts="{{json listPath=(concat fieldPrefix field.path) field=field}}">
        <ul>
          {{#each (get ../editorSource (concat ../fieldPrefix field.path)) as |listItem itemIndex|}}
            <li>
{{> fields
  editorConfig=../../editorConfig
  fields=field.itemFields
  editorSource=../../editorSource
  fieldPrefix=(concat ../fieldPrefix field.path '.' itemIndex '.')
}}
            </li>
          {{/each}}
        </ul>
        <a class="js-append-to-list" href="#">add to end of list</a>
      </div>
    {{/equal}}
  </p>
{{/each}}
